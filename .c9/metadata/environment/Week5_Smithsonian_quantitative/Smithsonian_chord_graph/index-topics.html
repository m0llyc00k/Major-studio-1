{"changed":true,"filter":false,"title":"index-topics.html","tooltip":"/Week5_Smithsonian_quantitative/Smithsonian_chord_graph/index-topics.html","value":"<!DOCTYPE html>\n<meta charset=\"utf-8\">\n\n<style>\n\n.node {\n  font: 300 10px \"Helvetica Neue\", Helvetica, Arial, sans-serif;\n  fill: #bbb;\n}\n\n.node:hover {\n  fill: #000;\n  font-size: 12px;\n}\n\n\n.link {\n  stroke: steelblue;\n  stroke-opacity: 0.3;\n  fill: none;\n  pointer-events: none;\n}\n\n\n.node:hover,\n.node--source,\n.node--target {\n  font-weight: 500;\n  font-size: 12px\n}\n\n\n.node--source {\n  fill: #2ca02c;\n   \n}\n\n.node--target {\n  fill: #662ca0;\n   \n}\n\n.link:hover,\n.link--source,\n.link--target{\n  stroke-opacity: 1; \n  stroke-width: 2px;\n}\n\n\n.link--source {\n  stroke: #662ca0;\n}\n\n\n.link--target {\n  stroke: #2ca02c;\n\n}\n.link--notSel\n{  fill: none;\n\n  stroke-opacity: 0 ;\n\n</style>\n<body>\n<script src=\"https://d3js.org/d3.v4.min.js\"></script>\n<script>\n\nvar diameter = 950,\n    radius = diameter / 2,\n    innerRadius = radius - 195;\n\nvar cluster = d3.cluster()\n    .size([358, innerRadius]);\n\nvar line = d3.radialLine()\n    .curve(d3.curveBundle.beta(.7))\n    .radius(function(d) { return d.y+5; })\n    .angle(function(d) { return d.x / 180 * Math.PI; });\n\nvar svg = d3.select(\"body\").append(\"svg\")\n    .attr(\"width\", 2000)\n    .attr(\"height\", 2000)\n    .append(\"g\")\n    .attr(\"transform\", \"translate(800, 800)\");\n    \n\nvar link = svg.append(\"g\").selectAll(\".link\");\nvar node = svg.append(\"g\").selectAll(\".node\");\n\nd3.csv(\"topics_titles_dataFinal.csv\", function(error, topics) {\n  if (error) throw error;\n  \n  var titles = topicsTotitles( topics );\n\n  var root = packageHierarchy(titles)\n      .sum(function(d) { return d.size; });\n\n  cluster(root);\n\n  link = link\n    .data(packageImports(root.leaves()))\n    .enter().append(\"path\")\n      .each(function(d) { d.source = d[0], d.target = d[d.length - 1]; })\n      .attr(\"class\", \"link\")\n      .attr(\"d\", line);\n\n  node = node\n    .data(root.leaves())\n    .enter().append(\"text\")\n      .attr(\"class\", \"node\")\n      .attr(\"dy\", \"0.31em\")\n      .attr(\"transform\", function(d) { return \"rotate(\" + (d.x - 90) + \")translate(\" + (d.y + 10) + \",0)\" + (d.x < 180 ? \"\" : \"rotate(180)\"); })\n      .attr(\"text-anchor\", function(d) { return d.x < 180 ? \"start\" : \"end\"; })\n      .text(function(d) { \n\t\tif( d.data.key != \"TITLE\")\n\t\t\treturn d.data.key; \n\t  })\n      .on(\"mouseover\", mouseovered)\n      .on(\"mouseout\", mouseouted);\n});\n\n\n\nfunction mouseovered(d) {\n\nnode\n  .each(function(n) { n.target = n.source = false; })\n\n\n  link\n      .classed(\"link--target\", function(l) { if (l.target === d) return l.source.source = true})\n      .classed(\"link--source\", function(l) { if (l.source === d) return l.target.target = true})\n      .filter(function(l) { return l.target === d || l.source === d})\n      // .style('opacity', function (link_d) { return link_d.source === d.source || link_d.target === d.target ? 1 : 0;})\n      \n\n  \n \n  node\n      .classed(\"node--target\", function(n) { return n.target; })\n      .classed(\"node--source\", function(n) { return n.source; })\n      \n      \n\n\n  d3.selectAll(\".node\")\n      .transition()\n      .duration(200)\n      .style(\"opacity\", 0)\n    d3.select(this)\n      .transition()\n      .duration(200)\n      .style(\"opacity\", 1)\n      \n    d3.selectAll(\".node--target\")\n      .transition()\n      .duration(200)\n      .style(\"opacity\", '1 !important')\n    d3.select(this)\n      .transition()\n      .duration(200)\n      .style(\"opacity\", '1 !important')\n      \n            \n    d3.selectAll(\".node--source\")\n      .transition()\n      .duration(200)\n      .style(\"opacity\", '1 !important')\n    d3.select(this)\n      .transition()\n      .duration(200)\n      .style(\"opacity\", '1 !important')\n      \n    d3.selectAll(\".link\")\n      .transition()\n      .duration(200)\n      .style(\"opacity\", 0)\n    d3.selectAll(\".link--target\")\n      .transition()\n      .duration(200)\n      .style(\"opacity\", 1)\n    d3.selectAll(\".link--source\")\n      .transition()\n      .duration(200)\n      .style(\"opacity\", 1)\n\n};\n\n\n\n\n\nfunction mouseouted(d) {\n  \n  \n  link\n      .classed(\"link--target\", false)\n      .classed(\"link--source\", false)\n      .transition()\n\n    node\n     \n      .classed(\"node--target\", false)\n      .classed(\"node--source\", false)\n      .transition()\n\n  d3.selectAll(\".node\")\n      .transition()\n      .duration(100)\n      .style(\"opacity\", 1)\n    d3.select(this)\n      .transition()\n      .duration(100)\n      .style(\"opacity\", 1)\n\n    d3.selectAll(\".node--target\")\n      .transition()\n      .duration(100)\n      .style(\"opacity\", '1 !important')\n    d3.select(this)\n      .transition()\n      .duration(100)\n      .style(\"opacity\", '1 !important')\n\n    d3.selectAll(\".link\")\n      .transition()\n      .duration(100)\n      .style(\"opacity\", 1)\n    d3.selectAll(\".link--target\")\n      .transition()\n      .duration(100)\n      .style(\"opacity\", 0)\n    d3.selectAll(\".link--source\")\n      .transition()\n      .duration(100)\n      .style(\"opacity\", 0)\n\n}\n\n\n\n//  construct the package hierarchy from class names.\nfunction packageHierarchy(titles) {\n  var map = {};\n\n  function find(name, data) {\n    var node = map[name], i;\n    if (!node) {\n      node = map[name] = data || {name: name, children: []};\n      if (name.length) {\n        node.parent = find(name.substring(0, i = name.lastIndexOf(\".\")));\n        node.parent.children.push(node);\n        node.key = name.substring(i + 1);\n      }\n    }\n    return node;\n  }\n  \n\n  titles.forEach(function(d) {\n\tif( typeof d.name != 'undefined')\n\t\tfind(d.name, d);\n  });\n\n  return d3.hierarchy(map[\"\"]);\n}\n\n// Return a list of imports for the given array of nodes.\nfunction packageImports(nodes) {\n  var map = {},\n      imports = [];\n\n  // Compute a map from name to node.\n  nodes.forEach(function(d) {\n    map[d.data.name] = d;\n  });\n\n  // For each import, construct a link from the source to target node.\n  nodes.forEach(function(d) {\n    if (d.data.imports) \n\t\td.data.imports.forEach(function(i) {\n\t\t\tvar input = map[d.data.name];\n\t\t\tvar mapi = map[i];\n\t\t\tif( typeof mapi != 'undefined'){\n\t\t\t\tvar path = input.path(mapi);\n\t\t\t\timports.push(path);\n\t\t\t}\n\t\t});\n  });\n\n  return imports;\n}\n\nfunction topicsTotitles(topics){\n var classArray = [];\n\n for( var column =0; column < topics.columns.length; column++){\n\t var classObj = {};\n\t classObj.name =  topics.columns[column];\n\t classObj.size = 1;\n\t classObj.imports=[];\n\t classArray.push(classObj);\n }\n for(var row =1; row < topics.length; row++){\n \tvar classObj = {};\n\tvar contributor = topics[row];\n\tclassObj.name = contributor[\"TITLE\"];\n\tclassObj.imports=[];\n\n\tvar size =1;\n\tfor( var column = 0; column < topics.columns.length;column++){\n\t\tif( contributor[topics.columns[column]]==1){\n\t\t\tclassObj.imports.push(topics.columns[column]) ;\n\t\t\tsize++;\n\t\t}\n\t}\n\tclassObj.size = size;\n\n\tclassArray.push(classObj);\n\n }\n return classArray;\n}\n\n\n</style>\n<script src=\"https://d3js.org/d3.v4.min.js\"></script>\n\n\n</script>\n\n</body>\n","undoManager":{"mark":-2,"position":1,"stack":[[{"start":{"row":64,"column":0},"end":{"row":326,"column":48},"action":"remove","lines":["<<<<<<< HEAD","</style>","<body>","<script src=\"https://d3js.org/d3.v4.min.js\"></script>","<script>","","var diameter = 950,","    radius = diameter / 2,","    innerRadius = radius - 195;","","var cluster = d3.cluster()","    .size([358, innerRadius]);","","var line = d3.radialLine()","    .curve(d3.curveBundle.beta(.7))","    .radius(function(d) { return d.y+5; })","    .angle(function(d) { return d.x / 180 * Math.PI; });","","var svg = d3.select(\"body\").append(\"svg\")","    .attr(\"width\", 2000)","    .attr(\"height\", 2000)","    .append(\"g\")","    .attr(\"transform\", \"translate(800, 800)\");","    ","","var link = svg.append(\"g\").selectAll(\".link\");","var node = svg.append(\"g\").selectAll(\".node\");","","d3.csv(\"topics_titles_dataFinal.csv\", function(error, topics) {","  if (error) throw error;","  ","  var titles = topicsTotitles( topics );","","  var root = packageHierarchy(titles)","      .sum(function(d) { return d.size; });","","  cluster(root);","","  link = link","    .data(packageImports(root.leaves()))","    .enter().append(\"path\")","      .each(function(d) { d.source = d[0], d.target = d[d.length - 1]; })","      .attr(\"class\", \"link\")","      .attr(\"d\", line);","","  node = node","    .data(root.leaves())","    .enter().append(\"text\")","      .attr(\"class\", \"node\")","      .attr(\"dy\", \"0.31em\")","      .attr(\"transform\", function(d) { return \"rotate(\" + (d.x - 90) + \")translate(\" + (d.y + 10) + \",0)\" + (d.x < 180 ? \"\" : \"rotate(180)\"); })","      .attr(\"text-anchor\", function(d) { return d.x < 180 ? \"start\" : \"end\"; })","      .text(function(d) { ","\t\tif( d.data.key != \"TITLE\")","\t\t\treturn d.data.key; ","\t  })","      .on(\"mouseover\", mouseovered)","      .on(\"mouseout\", mouseouted);","});","","","","function mouseovered(d) {","","node","  .each(function(n) { n.target = n.source = false; })","","","  link","      .classed(\"link--target\", function(l) { if (l.target === d) return l.source.source = true})","      .classed(\"link--source\", function(l) { if (l.source === d) return l.target.target = true})","      .filter(function(l) { return l.target === d || l.source === d})","      // .style('opacity', function (link_d) { return link_d.source === d.source || link_d.target === d.target ? 1 : 0;})","      ","","  "," ","  node","      .classed(\"node--target\", function(n) { return n.target; })","      .classed(\"node--source\", function(n) { return n.source; })","      ","      ","","","  d3.selectAll(\".node\")","      .transition()","      .duration(200)","      .style(\"opacity\", 0)","    d3.select(this)","      .transition()","      .duration(200)","      .style(\"opacity\", 1)","      ","    d3.selectAll(\".node--target\")","      .transition()","      .duration(200)","      .style(\"opacity\", '1 !important')","    d3.select(this)","      .transition()","      .duration(200)","      .style(\"opacity\", '1 !important')","      ","            ","    d3.selectAll(\".node--source\")","      .transition()","      .duration(200)","      .style(\"opacity\", '1 !important')","    d3.select(this)","      .transition()","      .duration(200)","      .style(\"opacity\", '1 !important')","      ","    d3.selectAll(\".link\")","      .transition()","      .duration(200)","      .style(\"opacity\", 0)","    d3.selectAll(\".link--target\")","      .transition()","      .duration(200)","      .style(\"opacity\", 1)","    d3.selectAll(\".link--source\")","      .transition()","      .duration(200)","      .style(\"opacity\", 1)","","};","","","","","","function mouseouted(d) {","  ","  ","  link","      .classed(\"link--target\", false)","      .classed(\"link--source\", false)","      .transition()","","    node","     ","      .classed(\"node--target\", false)","      .classed(\"node--source\", false)","      .transition()","","  d3.selectAll(\".node\")","      .transition()","      .duration(100)","      .style(\"opacity\", 1)","    d3.select(this)","      .transition()","      .duration(100)","      .style(\"opacity\", 1)","","    d3.selectAll(\".node--target\")","      .transition()","      .duration(100)","      .style(\"opacity\", '1 !important')","    d3.select(this)","      .transition()","      .duration(100)","      .style(\"opacity\", '1 !important')","","    d3.selectAll(\".link\")","      .transition()","      .duration(100)","      .style(\"opacity\", 1)","    d3.selectAll(\".link--target\")","      .transition()","      .duration(100)","      .style(\"opacity\", 0)","    d3.selectAll(\".link--source\")","      .transition()","      .duration(100)","      .style(\"opacity\", 0)","","}","","","","//  construct the package hierarchy from class names.","function packageHierarchy(titles) {","  var map = {};","","  function find(name, data) {","    var node = map[name], i;","    if (!node) {","      node = map[name] = data || {name: name, children: []};","      if (name.length) {","        node.parent = find(name.substring(0, i = name.lastIndexOf(\".\")));","        node.parent.children.push(node);","        node.key = name.substring(i + 1);","      }","    }","    return node;","  }","  ","","  titles.forEach(function(d) {","\tif( typeof d.name != 'undefined')","\t\tfind(d.name, d);","  });","","  return d3.hierarchy(map[\"\"]);","}","","// Return a list of imports for the given array of nodes.","function packageImports(nodes) {","  var map = {},","      imports = [];","","  // Compute a map from name to node.","  nodes.forEach(function(d) {","    map[d.data.name] = d;","  });","","  // For each import, construct a link from the source to target node.","  nodes.forEach(function(d) {","    if (d.data.imports) ","\t\td.data.imports.forEach(function(i) {","\t\t\tvar input = map[d.data.name];","\t\t\tvar mapi = map[i];","\t\t\tif( typeof mapi != 'undefined'){","\t\t\t\tvar path = input.path(mapi);","\t\t\t\timports.push(path);","\t\t\t}","\t\t});","  });","","  return imports;","}","","function topicsTotitles(topics){"," var classArray = [];",""," for( var column =0; column < topics.columns.length; column++){","\t var classObj = {};","\t classObj.name =  topics.columns[column];","\t classObj.size = 1;","\t classObj.imports=[];","\t classArray.push(classObj);"," }"," for(var row =1; row < topics.length; row++){"," \tvar classObj = {};","\tvar contributor = topics[row];","\tclassObj.name = contributor[\"TITLE\"];","\tclassObj.imports=[];","","\tvar size =1;","\tfor( var column = 0; column < topics.columns.length;column++){","\t\tif( contributor[topics.columns[column]]==1){","\t\t\tclassObj.imports.push(topics.columns[column]) ;","\t\t\tsize++;","\t\t}","\t}","\tclassObj.size = size;","","\tclassArray.push(classObj);",""," }"," return classArray;","=======",">>>>>>> e4acdedd3a1116da0c5d490201a650c876d65f28"],"id":2},{"start":{"row":64,"column":0},"end":{"row":323,"column":19},"action":"insert","lines":["</style>","<body>","<script src=\"https://d3js.org/d3.v4.min.js\"></script>","<script>","","var diameter = 950,","    radius = diameter / 2,","    innerRadius = radius - 195;","","var cluster = d3.cluster()","    .size([358, innerRadius]);","","var line = d3.radialLine()","    .curve(d3.curveBundle.beta(.7))","    .radius(function(d) { return d.y+5; })","    .angle(function(d) { return d.x / 180 * Math.PI; });","","var svg = d3.select(\"body\").append(\"svg\")","    .attr(\"width\", 2000)","    .attr(\"height\", 2000)","    .append(\"g\")","    .attr(\"transform\", \"translate(800, 800)\");","    ","","var link = svg.append(\"g\").selectAll(\".link\");","var node = svg.append(\"g\").selectAll(\".node\");","","d3.csv(\"topics_titles_dataFinal.csv\", function(error, topics) {","  if (error) throw error;","  ","  var titles = topicsTotitles( topics );","","  var root = packageHierarchy(titles)","      .sum(function(d) { return d.size; });","","  cluster(root);","","  link = link","    .data(packageImports(root.leaves()))","    .enter().append(\"path\")","      .each(function(d) { d.source = d[0], d.target = d[d.length - 1]; })","      .attr(\"class\", \"link\")","      .attr(\"d\", line);","","  node = node","    .data(root.leaves())","    .enter().append(\"text\")","      .attr(\"class\", \"node\")","      .attr(\"dy\", \"0.31em\")","      .attr(\"transform\", function(d) { return \"rotate(\" + (d.x - 90) + \")translate(\" + (d.y + 10) + \",0)\" + (d.x < 180 ? \"\" : \"rotate(180)\"); })","      .attr(\"text-anchor\", function(d) { return d.x < 180 ? \"start\" : \"end\"; })","      .text(function(d) { ","\t\tif( d.data.key != \"TITLE\")","\t\t\treturn d.data.key; ","\t  })","      .on(\"mouseover\", mouseovered)","      .on(\"mouseout\", mouseouted);","});","","","","function mouseovered(d) {","","node","  .each(function(n) { n.target = n.source = false; })","","","  link","      .classed(\"link--target\", function(l) { if (l.target === d) return l.source.source = true})","      .classed(\"link--source\", function(l) { if (l.source === d) return l.target.target = true})","      .filter(function(l) { return l.target === d || l.source === d})","      // .style('opacity', function (link_d) { return link_d.source === d.source || link_d.target === d.target ? 1 : 0;})","      ","","  "," ","  node","      .classed(\"node--target\", function(n) { return n.target; })","      .classed(\"node--source\", function(n) { return n.source; })","      ","      ","","","  d3.selectAll(\".node\")","      .transition()","      .duration(200)","      .style(\"opacity\", 0)","    d3.select(this)","      .transition()","      .duration(200)","      .style(\"opacity\", 1)","      ","    d3.selectAll(\".node--target\")","      .transition()","      .duration(200)","      .style(\"opacity\", '1 !important')","    d3.select(this)","      .transition()","      .duration(200)","      .style(\"opacity\", '1 !important')","      ","            ","    d3.selectAll(\".node--source\")","      .transition()","      .duration(200)","      .style(\"opacity\", '1 !important')","    d3.select(this)","      .transition()","      .duration(200)","      .style(\"opacity\", '1 !important')","      ","    d3.selectAll(\".link\")","      .transition()","      .duration(200)","      .style(\"opacity\", 0)","    d3.selectAll(\".link--target\")","      .transition()","      .duration(200)","      .style(\"opacity\", 1)","    d3.selectAll(\".link--source\")","      .transition()","      .duration(200)","      .style(\"opacity\", 1)","","};","","","","","","function mouseouted(d) {","  ","  ","  link","      .classed(\"link--target\", false)","      .classed(\"link--source\", false)","      .transition()","","    node","     ","      .classed(\"node--target\", false)","      .classed(\"node--source\", false)","      .transition()","","  d3.selectAll(\".node\")","      .transition()","      .duration(100)","      .style(\"opacity\", 1)","    d3.select(this)","      .transition()","      .duration(100)","      .style(\"opacity\", 1)","","    d3.selectAll(\".node--target\")","      .transition()","      .duration(100)","      .style(\"opacity\", '1 !important')","    d3.select(this)","      .transition()","      .duration(100)","      .style(\"opacity\", '1 !important')","","    d3.selectAll(\".link\")","      .transition()","      .duration(100)","      .style(\"opacity\", 1)","    d3.selectAll(\".link--target\")","      .transition()","      .duration(100)","      .style(\"opacity\", 0)","    d3.selectAll(\".link--source\")","      .transition()","      .duration(100)","      .style(\"opacity\", 0)","","}","","","","//  construct the package hierarchy from class names.","function packageHierarchy(titles) {","  var map = {};","","  function find(name, data) {","    var node = map[name], i;","    if (!node) {","      node = map[name] = data || {name: name, children: []};","      if (name.length) {","        node.parent = find(name.substring(0, i = name.lastIndexOf(\".\")));","        node.parent.children.push(node);","        node.key = name.substring(i + 1);","      }","    }","    return node;","  }","  ","","  titles.forEach(function(d) {","\tif( typeof d.name != 'undefined')","\t\tfind(d.name, d);","  });","","  return d3.hierarchy(map[\"\"]);","}","","// Return a list of imports for the given array of nodes.","function packageImports(nodes) {","  var map = {},","      imports = [];","","  // Compute a map from name to node.","  nodes.forEach(function(d) {","    map[d.data.name] = d;","  });","","  // For each import, construct a link from the source to target node.","  nodes.forEach(function(d) {","    if (d.data.imports) ","\t\td.data.imports.forEach(function(i) {","\t\t\tvar input = map[d.data.name];","\t\t\tvar mapi = map[i];","\t\t\tif( typeof mapi != 'undefined'){","\t\t\t\tvar path = input.path(mapi);","\t\t\t\timports.push(path);","\t\t\t}","\t\t});","  });","","  return imports;","}","","function topicsTotitles(topics){"," var classArray = [];",""," for( var column =0; column < topics.columns.length; column++){","\t var classObj = {};","\t classObj.name =  topics.columns[column];","\t classObj.size = 1;","\t classObj.imports=[];","\t classArray.push(classObj);"," }"," for(var row =1; row < topics.length; row++){"," \tvar classObj = {};","\tvar contributor = topics[row];","\tclassObj.name = contributor[\"TITLE\"];","\tclassObj.imports=[];","","\tvar size =1;","\tfor( var column = 0; column < topics.columns.length;column++){","\t\tif( contributor[topics.columns[column]]==1){","\t\t\tclassObj.imports.push(topics.columns[column]) ;","\t\t\tsize++;","\t\t}","\t}","\tclassObj.size = size;","","\tclassArray.push(classObj);",""," }"," return classArray;"]}],[{"start":{"row":330,"column":0},"end":{"row":338,"column":48},"action":"remove","lines":["<<<<<<< HEAD","","</script>","","</body>","=======","<body>","<script src=\"data.js\"></script></body>",">>>>>>> e4acdedd3a1116da0c5d490201a650c876d65f28"],"id":3},{"start":{"row":330,"column":0},"end":{"row":333,"column":7},"action":"insert","lines":["","</script>","","</body>"]}]]},"ace":{"folds":[],"scrolltop":1937.5,"scrollleft":0,"selection":{"start":{"row":327,"column":3},"end":{"row":327,"column":3},"isBackwards":false},"options":{"guessTabSize":true,"useWrapMode":false,"wrapToView":true},"firstLineState":{"row":128,"state":"js-no_regex","mode":"ace/mode/html"}},"timestamp":1633647590807}